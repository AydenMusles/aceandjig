<script>
$(window).load(function(){

    $('#{{ product.title | handle }}-wrapper').each(function(){
        var self = $(this);
        self.find('select.option--color, select.option--textile, select.option--textiles').each(function(){
            var selectedColor = $(this).val();
            self.find('.color-options .color-label').html(selectedColor.replace(/-/g, ' '));
            self.find('.product-{{ product.title | handle }}.thumbnails a').each(function(){
                if ($(this).data('value') == selectedColor) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
            $(this).change(function(){
                var newVal = $(this).val();
                self.find('.color-options .color-label').html(newVal.replace(/-/g, ' '));
                self.find('.thumbnails a').each(function(){
                    if ($(this).data('value') == newVal) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
        });
    });

});
</script>
